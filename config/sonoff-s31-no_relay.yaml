substitutions:
  name: plug-s31
  friendly_name: Plug-S31
  device_description: Sonoff S31 Power Monitor
  hardware_info: Disabled-Relay|ESP8266_1M|CSE7766
  project_name: SB-Inovations.Sonoff_S31
  project_version: 0.0.1
  restore_mode_relay: ALWAYS_ON
esphome:
  name: plug-s31
  friendly_name: Plug-S31
  comment: Sonoff S31 Power Monitor
  project:
    name: SB-Inovations.Sonoff_S31
    version: 0.0.1
  name_add_mac_suffix: true
  min_version: 2024.11.3
  build_path: build/plug-s31
  area: ''
  platformio_options: {}
  includes: []
  libraries: []
esp8266:
  board: esp01_1m
  early_pin_init: false
  framework:
    version: 3.1.2
    source: ~3.30102.0
    platform_version: platformio/espressif8266@4.2.1
  restore_from_flash: false
  board_flash_mode: dout
time:
- platform: homeassistant
  id: homeassistant_time
  timezone: EST5EDT,M3.2.0,M11.1.0
  update_interval: 15min
debug:
  update_interval: 60s
binary_sensor:
- platform: status
  name: Online Status
  id: ink_ha_connected
  entity_category: diagnostic
  disabled_by_default: false
  device_class: connectivity
- platform: gpio
  pin:
    number: 0
    mode:
      input: true
      pullup: true
      output: false
      open_drain: false
      pulldown: false
      analog: false
    inverted: true
  id: button_side
  on_click:
  - min_length: 15s
    max_length: 60s
    then:
    - button.press:
        id: factory_reset_all
  disabled_by_default: false
  name: button_side
  internal: true
text_sensor:
- platform: template
  name: Hardware Info
  entity_category: diagnostic
  update_interval: 24h
  lambda: !lambda |-
    return {"Disabled-Relay|ESP8266_1M|CSE7766"};
  disabled_by_default: false
- platform: version
  name: ESPHome Version
  disabled_by_default: false
  icon: mdi:new-box
  entity_category: diagnostic
  hide_timestamp: false
- platform: wifi_info
  ip_address:
    name: ESP IP Adress
    icon: mdi:ip-network-outline
    disabled_by_default: false
    entity_category: diagnostic
    update_interval: 1s
  mac_address:
    name: ESP MAC Adress
    icon: mdi:network-outline
    disabled_by_default: false
    entity_category: diagnostic
  ssid:
    name: AP SSID
    icon: mdi:access-point
    disabled_by_default: false
    entity_category: diagnostic
    update_interval: 1s
  bssid:
    name: AP MAC Address
    icon: mdi:access-point
    disabled_by_default: false
    entity_category: diagnostic
    update_interval: 1s
sensor:
- platform: uptime
  name: Uptime
  id: sys_uptime
  update_interval: 60s
  entity_category: diagnostic
  disabled_by_default: false
  force_update: false
  unit_of_measurement: s
  icon: mdi:timer-outline
  accuracy_decimals: 0
  device_class: duration
  state_class: total_increasing
  type: seconds
- platform: wifi_signal
  name: Signal
  id: wifi_signal_db
  update_interval: 60s
  entity_category: diagnostic
  disabled_by_default: false
  force_update: false
  unit_of_measurement: dBm
  accuracy_decimals: 0
  device_class: signal_strength
  state_class: measurement
- platform: cse7766
  current:
    name: Amps
    unit_of_measurement: A
    accuracy_decimals: 2
    disabled_by_default: false
    force_update: false
    device_class: current
    state_class: measurement
  voltage:
    name: Voltage
    unit_of_measurement: V
    accuracy_decimals: 1
    disabled_by_default: false
    force_update: false
    device_class: voltage
    state_class: measurement
  power:
    name: Watts
    accuracy_decimals: 0
    id: plug_power
    disabled_by_default: false
    force_update: false
    unit_of_measurement: W
    device_class: power
    state_class: measurement
- platform: total_daily_energy
  name: Daily Energy
  power_id: plug_power
  filters:
  - multiply: 0.001
  unit_of_measurement: kWh
  disabled_by_default: false
  force_update: false
  device_class: energy
  state_class: total_increasing
  restore: true
  method: right
  accuracy_decimals: 2
button:
- platform: restart
  name: Reboot
  icon: mdi:power-cycle
  entity_category: diagnostic
  disabled_by_default: false
  device_class: restart
- platform: safe_mode
  name: Safe Mode
  entity_category: diagnostic
  disabled_by_default: false
  icon: mdi:restart-alert
  device_class: restart
- platform: factory_reset
  name: Factory Reset - Wipe All
  disabled_by_default: true
  id: factory_reset_all
  icon: mdi:delete-forever
  entity_category: diagnostic
  device_class: restart
api:
  port: 6053
  password: ''
  reboot_timeout: 15min
ota:
- platform: esphome
  version: 2
  port: 8266
captive_portal: {}
wifi:
  ap:
    ap_timeout: 1min
  domain: .local
  reboot_timeout: 15min
  power_save_mode: NONE
  fast_connect: false
  output_power: 20.0
  passive_scan: false
  enable_on_boot: true
  use_address: plug-s31.local
web_server:
  port: 80
  version: 2
  enable_private_network_access: true
  include_internal: false
  ota: true
  log: true
  css_url: ''
  js_url: https://oi.esphome.io/v2/www.js
logger:
  baud_rate: 0
  tx_buffer_size: 512
  deassert_rts_dtr: false
  hardware_uart: UART0
  level: DEBUG
  logs: {}
  esp8266_store_log_strings_in_flash: true
uart:
- rx_pin:
    number: 3
    mode:
      input: true
      output: false
      open_drain: false
      pullup: false
      pulldown: false
      analog: false
    inverted: false
  baud_rate: 4800
  parity: EVEN
  rx_buffer_size: 256
  stop_bits: 1
  data_bits: 8
switch:
- platform: gpio
  name: Relay
  internal: true
  pin:
    number: 12
    mode:
      output: true
      input: false
      open_drain: false
      pullup: false
      pulldown: false
      analog: false
    inverted: false
  id: relay
  restore_mode: ALWAYS_ON
  disabled_by_default: false
  interlock_wait_time: 0ms
status_led:
  pin:
    number: 13
    inverted: true
    mode:
      output: true
      input: false
      open_drain: false
      pullup: false
      pulldown: false
      analog: false
dashboard_import:
  package_import_url: github://bnevets27/ESPHome-Projects/config/sonoff-s31-no_relay.yaml@main
  import_full_config: true
